define("/modules/widget/dialog/md.dialog",["/modules/widget/draggable/md.draggable"],function(a,b,c){var d,e;return d=a("/modules/widget/draggable/md.draggable"),e=function(a){function b(c,d){this.element=c,this.opts=d,this.$el=a(this.element),this.options=a.extend({},b.Options,this.opts),this.inti()}b.Options={onConfirm:function(){},onShow:null,onHide:null,title:"",content:null,width:400,$dialog:null,draggable:!1,footer:null,height:"auto"},b.STATICS={template:'<div class="md-dialog overlay"><div class="dialog"><div class="dialog-header"><span class="btn-link btn-close" type="button">×</span></div><div class="dialog-body"></div><div class="dialog-footer"><button class="btn btn-cancel">取消</button><button class="btn btn-primary btn-ok">确定</button></div></div></div>'},b.prototype.inti=function(){this.dialog().show().remove(),this.$header=this.$dialog.find(".dialog-header"),this.$body=this.$dialog.find(".dialog-body"),this.$footer=this.$dialog.find(".dialog-footer");null!==this.options.title&&this.$header.append(this.options.title),null!==this.options.content&&this.$body.empty().append(this.options.content),null!==this.options.footer&&this.$footer.append(this.options.footer),this.$el.on("click",a.proxy(this.show,this))},b.prototype.setPosition=function(){var b,c;return b=(a(window).innerWidth()-this.$dialog.find(".dialog").innerWidth())/2,c=(a(window).innerHeight()-this.$dialog.find(".dialog").innerHeight())/2,this.$dialog.find(".dialog").css({left:b,top:c})},b.prototype.dialog=function(){return this.$dialog=this.$dialog||this.options.$dialog||a(b.STATICS.template)},b.prototype.show=function(c){var d;return d=a.extend({},b.Options,this.options,c),"function"==typeof this.options.onShow&&d.onShow.call(this),this.dialog().show().appendTo("body"),this.$dialog.on("click",".btn-cancel,.btn-close",a.proxy(this.hide,this)),this.$dialog.on("click",".btn-ok",a.proxy(this.ok,this)),a(document).on("keyup.md",function(a){27===a.keyCode&&_this.hide()}),this.options.draggable&&(this.dialog().addClass("draggable"),this.$header.draggable(this.$dialog.find(".dialog")[0])),this.setPosition()},b.prototype.hide=function(){return"function"==typeof this.options.onHide&&this.options.onHide(),a(document).off("keyup.md"),this.$dialog.remove()},b.prototype.ok=function(){"function"==typeof this.options.onConfirm&&this.options.onConfirm.call(this)},a.fn.dialog=function(a){return this.each(function(){return new b(this,a)})},a.fn.dialog.Constructor=b,c.exports=b}(jQuery)}),define("/modules/widget/draggable/md.draggable",[],function(a,b,c){var d=function(a,b,c){this.options=$.extend({},d.Options,c),this.$drapEl=$(a),this.$targetEl=$(b),this.moveable=!1;var e=this;this.$drapEl.on("mousedown",function(a){e.moveable=!0,e.lastEvent=a,$(document).on("mousemove",function(a){e.move(a)}),$(document).on("mouseup",function(){e.moveable=!1,$(document).off("mousemove"),$(window).off("selectstart")}),$(window).on("selectstart",function(){return!1})})};d.Options={container:"body"},d.prototype.lastEvent=null,d.prototype.move=function(a){if(this.moveable){var b=$(this.options.container),c=this.lastEvent,d=this.$drapEl.offset().left+a.clientX-c.clientX,e=this.$drapEl.offset().top+a.clientY-c.clientY;e=Math.max(e,b.offset().top),d=Math.max(d,b.offset().left),e=Math.min(e,b.offset().top+b.innerHeight()-this.$targetEl.innerHeight()),d=Math.min(d,b.offset().left+b.innerWidth()-this.$targetEl.innerWidth()),this.$targetEl.css({left:d-b.offset().left,top:e-b.offset().top}),this.lastEvent=a}},$.fn.draggable=function(a,b){return this.each(function(){new d(this,a,b)})},$.fn.draggable.Constructor=d,c.exports=d}),define("/modules/widget/dropdown/md.dropdown",[],function(a,b,c){return function(a){var b=function(c,d){this.$el=a(c),this.options=a.extend({},b.options,d),this.init()};b.options={trigger:"click",onClick:function(){},onShow:function(){},onHide:function(){}},b.prototype.init=function(){var a=this;"hover"===a.options.trigger?a.$el.hover(function(){a.$el.hasClass("open")||(a.$el.addClass("open"),a.options.onShow.call(a))},function(){a.$el.removeClass("open"),a.options.onHide.call(a)}):"click"===a.options.trigger&&a.$el.click(function(){a.$el.toggleClass("open")}),this.$el.on("click",".dropdown-list li",function(){a.options.onClick.call(a,this)})},a.fn.dropdown=function(a){return this.each(function(){new b(this,a)})},a("[data-toggle='dropdown']").each(function(){new b(this)}),a.fn.dropdown.Constructor=b,c.exports=b}(jQuery)}),define("/modules/widget/imgCover/md.imgCover",[],function(){!function(a){var b=function(c,d){this.$el=a(c),this.options=a.extend({},b.Options,d),this.$img=this.$el.find("img"),this.setCover()};b.Options={mode:"cover"},b.prototype.setCover=function(){var a=new Image;a.src=this.$img.attr("src"),a.complete?this.setStyle(a):a.onload=function(){this.setStyle(a)}},b.prototype.setStyle=function(a){var b=a.width/a.height,c=this.$el.innerWidth()/this.$el.innerHeight();"cover"===this.options.mode&&c>b?this.$img.css({"max-width":"100%",width:"100%",height:"auto"}):"cover"===this.options.mode&&c>!b?this.$img.css({"max-height":"100%","max-width":"none",height:"100%",width:"auto"}):"contain"===this.options.mode&&c>b?this.$img.css({"max-height":"100%","max-width":"100%",height:"100%",width:"auto"}):"contain"===this.options.mode&&c>!b&&this.$img.css({"max-height":"100%","max-width":"100%",width:"100%",height:"auto"})},a.fn.imgCover=function(a){return this.each(function(){new b(this,a)})},a.fn.imgCover.Constructor=b}(jQuery)}),define("/modules/widget/modal/md.modal",[],function(a,b){"use strict";return function(a){var c=function(b,d){this.$el=a(d),this.options=a.extend({},c.Options,b),this.inti()};c.Options={bgClose:!0,target:null,onShow:null,onClose:null,onDestroy:null,content:null},c.prototype.STATICS={template:'<div class="modal"><div class="modalContainer"><div class="modalHeader"><span class="btnClose" title="关闭"><i class="icon-closeelement"></i> </span></div><div class="modalBody"></div> </div> </div>'},c.prototype.inti=function(){this.$model=this.model(),this.$el.length&&this.$el.off("click.md").on("click.md",a.proxy(this.show,this));var b=this;this.$model.find(".btnClose").on("click",a.proxy(this.hide,this)),a(document).on("keyup",function(a){27===a.keyCode&&b.hide()}),this.options.bgClose&&b.$model.on("click",function(a){a.target===b.$model[0]&&b.hide()})},c.prototype.model=function(){return this.$model?this.$model:this.options.target?a(this.options.target):a(this.STATICS.template).find(".modalBody").append(this.options.content).parents(".modal").appendTo("body")},c.prototype.show=function(){"function"==typeof this.options.onShow&&this.options.onShow(),this.$model.addClass("open")},c.prototype.hide=function(){"function"==typeof this.options.onClose&&this.options.onClose(),this.$model.removeClass("open")},c.prototype.destroy=function(){"function"==typeof this.options.onDestroy&&this.options.onDestroy(),this.$model.remove(),this.$el.off("click.md")},a.fn.mdModel=function(a){return this.each(function(){new c(a,this)})},a.fn.mdModel.show=function(a){return new c(a).show()},a.fn.mdModel.destroyAll=function(){a(".mdModel").remove()},a("[data-toggle='model']").each(function(){var b=a(this).attr("href")||a(this).data("target");new c({target:b},this)}),a.fn.mdModel.Constructor=c,b.exports=c}(jQuery)}),define("/modules/widget/pager/md.pager",[],function(){return function(a){a.fn.Pager=function(c){new b(a(this),c)};var b=function(b,c){var d=this,e=a.extend({pageIndex:1,pageSize:20,count:0,pageCount:5,align:"center",prev:"上一页",next:"下一页",changePage:function(){}},c);return d.init=function(){if(0==b.find("div.mdPager").length){var c=a("<div/>");e.className&&c.addClass(e.className),c.addClass("mdPager"),b.append(c)}d.create()},d.showPages=e.pageCount,d.pageIndex=1,e.pageIndex&&(d.pageIndex=e.pageIndex),d.pageCount=e.pageCount,d.create=function(){var c=a("<div/>").attr("align",e.align),f=Math.ceil(e.count/e.pageSize),g="";if(g=1!=d.pageIndex?a("<a/>").addClass("pageBtn").attr("href","javascript:void(0)").text(e.prev).click(function(){d.changePage(null,d.pageIndex-1)}):a("<span/>").addClass("pageBtnDisable").text(e.prev),c.append(g),f>d.showPages+1)if(d.pageIndex<d.pageCount-1){for(var h=1;h<=d.showPages;h++)g=d.pageIndex==h?a("<span/>").addClass("pageOn").text(h):a("<a/>").attr("href","javascript:void(0)").text(h).click(function(){d.changePage(this)}),c.append(g);c.append(a("<span/>").text("...")),g=a("<a/>").attr("href","javascript:void(0)").text(f).click(function(){d.changePage(null,f)}),c.append(g)}else if(g=a("<a/>").attr("href","javascript:void(0)").text(1).click(function(){d.changePage(null,1)}),c.append(g),d.pageIndex>d.pageCount-1&&c.append(a("<span/>").text("...")),f<d.pageIndex+d.pageCount-1){var i=d.pageIndex-2;f-i<d.pageCount-1&&(i=f-(d.pageCount-1));for(var h=i;f>=h;h++)g=d.pageIndex==h?a("<span/>").addClass("pageOn").text(h):a("<a/>").attr("href","javascript:void(0)").text(h).click(function(){d.changePage(this)}),c.append(g)}else{for(var j=(d.pageCount-1)/2,h=d.pageIndex-j;h<=d.pageIndex+j;h++)g=d.pageIndex==h?a("<span/>").addClass("pageOn").text(h):a("<a/>").attr("href","javascript:void(0)").text(h).click(function(){d.changePage(this)}),c.append(g);c.append(a("<span/>").text("...")),g=a("<a/>").attr("href","javascript:void(0)").text(f).click(function(){d.changePage(null,f)}),c.append(g)}else for(var h=1;f>=h;h++)g=d.pageIndex==h?a("<span/>").addClass("pageOn").text(h):a("<a/>").attr("href","javascript:void(0)").text(h).click(function(){d.changePage(this)}),c.append(g);g=d.pageIndex!=f?a("<a/>").addClass("pageBtn").attr("href","javascript:void(0)").text(e.next).click(function(){d.changePage(null,parseInt(d.pageIndex)+1)}):a("<span/>").addClass("pageBtnDisable").text(e.next),c.append(g),e.count>e.pageSize?b.find("div.mdPager").empty().append(c).show():b.find("div.mdPager").empty().hide()},d.changePage=function(b,c){d.pageIndex=b?Number(a(b).text()):c,e.changePage(d.pageIndex),d.create()},d.init(),b}}(jQuery)}),define("/modules/widget/popover/md.popover",[],function(a,b){var c=function(a,b){this.$el=$(a),this.options=$.extend({},c.Options,b),this.inti()};c.Options={related:"body",relatedSpace:10,onlyOne:!1,placement:"bottom",content:null},c.STATICS={template:'<div class="popover popover-auto" data-open="false"><div class="arrow"></div></div>'},c.prototype.inti=function(){this.popover().data("open",!1),this.isOpen=!1,this.isManual=this.options.content?!1:!0,this.$el.on("click",$.proxy(this.toggle,this))},c.prototype.popover=function(){return this.$popover=this.$popover||$(c.STATICS.template).append(this.options.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.popover().find(".arrow")},c.prototype.getPosition=function(){var a={};return a.left=this.$el.offset().left-$(this.options.related).offset().left,a.top=this.$el.offset().top-$(this.options.related).offset().top,"bottom"===this.options.placement?(this.popover().addClass("popover-bottom"),a.left+=(this.$el.innerWidth()-this.popover().innerWidth())/2,a.top+=this.$el.outerHeight()):"right"===this.options.placement?(this.popover().addClass("popover-right"),a.left+=this.$el.innerWidth(),a.top+=+(this.$el.outerHeight()-this.popover().outerHeight())/2):"top"===this.options.placement?(this.popover().addClass("popover-top"),a.left+=(this.$el.innerWidth()-this.popover().innerWidth())/2,a.top-=this.popover().outerHeight()):"left"===this.options.placement&&(this.popover().addClass("popover-left"),a.left-=this.$el.innerWidth(),a.top+=+(this.$el.outerHeight()-this.popover().outerHeight())/2),a},c.prototype.setPosition=function(){var a=this.getPosition(),b=a.left,c=a.top;b=b>=this.options.relatedSpace?b:this.options.relatedSpace,c=c>=this.options.relatedSpace?c:this.options.relatedSpace,b<=this.options.relatedSpace&&(b=this.options.relatedSpace,this.arrow().css("left",this.$el.offset().left+this.$el.innerWidth()/2)),c<=this.options.relatedSpace&&(c=this.options.relatedSpace,this.arrow().css("top",this.$el.offset().top+this.$el.outerHeight()/2)),this.popover().css({left:b,top:c})},c.prototype.close=function(){this.isOpen&&(this.isManual?this.$popover.hide():this.$popover.remove(),this.isOpen=!1,this.$popover.data("open",!1))},c.prototype.open=function(){this.isManual?this.$popover.show():(this.popover().appendTo(this.options.related),this.setPosition()),this.options.onlyOne&&this.hideOther(),this.isOpen=!0,this.popover().data("open",!0)},c.prototype.toggle=function(){this.isOpen=this.$popover.data("open")===!0,this.isOpen?this.close():this.open()},c.prototype.hideOther=function(){this.options.isManual?($(".popover-manual").not(this.$popover).data("open",!1).hide(),$(".popover-auto").data("close",!0).remove()):($(".popover-manual").data("open",!1).hide(),$(".popover-auto").not(this.$popover).remove())},$.fn.mdPopover=function(a){return this.each(function(){new c(this,a)})},$.fn.mdPopover.Constructor=c,b.exports=c}),define("/modules/widget/scroller/scroller",[],function(){var a=function(b,c){this.$scroller=$(b),this.options=$.extend({},a.options,c),this.init()};return a.prototype.init=function(){var a=this;if(this.$scroller.addClass("scroller").wrapInner('<div class="contentWrap"></div>'),this.$content=this.$scroller.find(".contentWrap"),this.getHeight(this.$content)-this.getHeight(this.$scroller)<0)return!1;this.$scrollBar=this.scrollBar(),this.$scrollBtn=this.$scrollBar.find(".scrollBtn");var b=this.$scroller[0];b.addEventListener?(b.addEventListener("mousewheel",$.proxy(this.scroll,this),!1),b.addEventListener("DOMMouseScroll",$.proxy(this.scroll,this),!1)):b.attachEvent("onmousewheel",$.proxy(this,this.scroll)),this.$scrollBtn.on("mousedown.md.",function(b){var c=a.$content.position().top;return $(document).on("mousemove.md",function(d){var e=a.$content.innerHeight()-a.$scroller.innerHeight(),f=a.$scrollBar.innerHeight()-a.$scrollBtn.innerHeight(),g=c+(b.clientY-d.clientY)*e/f;a.setPosition(g)}),$(document).on("mouseup.md",function(){$(document).off("mousemove.md")}),!1})},a.prototype.scroll=function(a){var b,c=Math.max(-1,Math.min(1,a.wheelDelta||-a.deltaY||-a.detail));b=c>0?this.$content.position().top+10:this.$content.position().top-10,this.setPosition(b)},a.prototype.setPosition=function(a){var b=this.$content.innerHeight()-this.$scroller.innerHeight(),c=this.$scrollBar.innerHeight()-this.$scrollBtn.innerHeight();a=Math.min(0,a)&&Math.max(-b,a);var d=-c*a/b;this.$content.css("top",a),this.$scrollBtn.css("top",d)},a.prototype.scrollBar=function(){var a=$('<div class="scrollBar"><div class="scrollBtn"></div> </div>').appendTo(this.$scroller);return a.find(".scrollBtn").css("height",Math.max(30,this.$scroller.innerHeight()*this.$scroller.innerHeight()/this.$content.innerHeight())),a},a.prototype.getHeight=function(a){var b=this.$scroller.attr("style");"none"===this.$scroller.css("display")&&this.$scroller.css({position:"absolute",visibility:"hidden",display:"block"});var c=a.outerHeight();return this.$scroller.attr("style",b),c},$.fn.scroller=function(b){return this.each(function(){new a(this,b)})},$("[data-toggle='scroller']").each(function(){new a(this)}),a}),define("/modules/widget/select/select",[],function(){var a=function(b,c){this.$el=$(b),this.options=$.extend({},a.options,c),this.init()};return a.options={onChange:function(){},onSelect:function(){}},a.prototype.init=function(){var a=this;this.$el.on("click.md",".selectBtn",$.proxy(this.toggle,this)).on("click.md",".selectList li",function(){a.onSelect(this)}).on("change.md",function(b,c){a.options.onChange.call(a,c,a)})},a.prototype.toggle=function(){this.$el.toggleClass("open")},a.prototype.onSelect=function(a){var b=$(a),c=this.$el.find(".selectDetail"),d=b.data("value")||"",e=c.data("value")||"";d!==e&&(this.value=d,c.data("value",d).text(b.text()),this.$el.trigger("change.md",a)),this.options.onSelect.call(this,a,this),this.toggle()},$.fn.select=function(b){return this.each(function(){new a(this,b)})},$("[data-toggle='select']").each(function(){new a(this)}),$.fn.select.Constructor=a,a}),define("/modules/widget/selectInput/selectInput",["/modules/jquery/jquery-1.11.1.js","/modules/widget/scroller/scroller"],function(a){a("/modules/jquery/jquery-1.11.1.js"),a("/modules/widget/scroller/scroller");var b=function(a,c){this.$el=$(a),this.$input=this.$el.find("input"),this.$optionList=this.$input.next(".optionList").scroller(),this.options=$.extend({},b.options,c),this.inti()};b.options={autoTip:!0,clearBtn:!0,allowLines:5},b.Options={clearBtn:'<span class="btnClear" title="清除">×</span>'},b.formatResult=function(a,b){var c="("+b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return a.replace(new RegExp(c,"gi"),"<strong>$1</strong>")},b.onKeyup=function(){""!==$.trim(this.$input.val())?this.$clearBtn.show():this.$clearBtn.hide(),this.currentValue!==this.$input.val()&&(this.currentValue=this.$input.val(),this.$input.trigger("selectChange"))},b.prototype.inti=function(){var a=this,c=Math.min(this.options.allowLines,this.$optionList.find("li").size());this.$optionList.height(30*c),this.$el.on("mouseover",function(){""!==a.$input.val()&&a.$clearBtn.show()}).on("mouseout",function(){a.$input.is(":focus")||a.$clearBtn.hide()}),this.$input.on("focus",function(){a.show(),""!==a.$input.val()?a.$clearBtn.show():a.$clearBtn.hide()}).on("blur",function(){a.$clearBtn.hide()}).on("keyup",$.proxy(b.onKeyup,this)).on("selectChange",$.proxy(b.filter,this)),this.$optionList.on("click",".option",function(){a.$input.val($(this).text()),a.hide()}),this.options.clearBtn&&(this.$clearBtn=this.clearBtn()),$(window).on("click.md",function(b){-1===$.inArray(a.$el.get(0),$(b.target).parents())&&a.hide()})},b.prototype.clearBtn=function(){return this.$clearBtn||$(b.Options.clearBtn).on("click",$.proxy(this.clear,this)).appendTo(this.$el)},b.prototype.clear=function(){this.$input.val("").trigger("focus")},b.filter=function(){var a,b=this.currentValue.toLowerCase(),c=$.grep(this.$optionList.find("li"),function(a){return-1!==a.outerHTML.indexOf(b)});$.each(c,function(){}),this.$optionList.html(a)},b.prototype.show=function(){this.$optionList.show()},b.prototype.hide=function(){this.$optionList.hide()},$.fn.selectInput=function(a){return this.each(function(){new b(this,a)})},$("[data-toggle='selectinput']").each(function(){new b(this)})}),define("/modules/widget/textEdit/md.textEdit",[],function(){!function(a){var b=function(c,d){this.$editGroup=a(c),this.options=a.extend({},b.Options,d),this.inti()};b.Options={active:!1,url:"",isShowButton:!0,onSuccess:null,onFail:null,onTimeout:null},b.prototype.inti=function(){this.$inputEdit=this.$editGroup.find(".input-editable"),this.$btnEdit=this.$editGroup.find(".btn-edit"),this.$groupSave=this.$editGroup.find(".group-save"),this.$btnCancel=this.$groupSave.find(".btn-cancel"),this.$btnSave=this.$groupSave.find(".btn-save"),this.active=this.options.active,this.$btnEdit.on("click",a.proxy(this.allowEdit,this)),this.$btnCancel.on("click",a.proxy(this.cancelEdit,this)),this.$btnSave.on("click",a.proxy(this.saveEdit,this));var b=this;a("body").on("click.md",function(c){-1===a.inArray(b.$editGroup.get(0),a(c.target).parents())&&b.cancelEdit()})},b.prototype.getEditText=function(){var a=this.$inputEdit.val();return this.extension=a.substring(a.lastIndexOf(".")+1),this.editText=a.substring(0,a.lastIndexOf("."))},b.prototype.allowEdit=function(){return this.getEditText(),this.$inputEdit.addClass("focus").removeAttr("disabled").val(this.editText).focus(),this.options.isShowButton&&(this.$btnEdit.parents(".group-edit").hide(),this.$groupSave.show()),this.active=!0,this},b.prototype.cancelEdit=function(){return this.active?(this.$groupSave.hide(),this.$inputEdit.removeClass("focus").prop("disabled","disabled").val(this.editText+"."+this.extension),this.$btnEdit.parents(".group-edit").show(),this):void 0},b.prototype.saveEdit=function(){if(this.editText===this.$inputEdit.val())return void this.cancelEdit();var b=this;a.ajax({url:this.options.url,data:{editName:this.$inputEdit.val()},global:!1,success:function(a){"ok"===a.trim()?"function"==typeof b.options.onShow&&b.options.onShow():(b.cancelEdit(),"function"==typeof b.options.onFail&&b.options.onFail())},error:function(){b.cancelEdit(),"function"==typeof b.options.onTimeout&&b.options.onTimeout()}})},a.fn.mdTextEdit=function(a){return this.each(function(){new b(this,a)})},a.fn.mdTextEdit.Constructor=b}(jQuery)});