define(["jquery"],function(){return(function(b){var a=function(c,d){this.$el=b(d);this.options=b.extend({},a.DEFAULTS,c);this.inti()};a.DEFAULTS={bgClose:true,target:null,onShow:null,onClose:null,onDestroy:null,content:null};a.prototype.STATICS={template:'<div class="md-box"><div class="box-container"><div class="box-header"><span class="btn-close" title="关闭"><i class="icon-closeelement"></i> </span></div><div class="box-content"></div> </div> </div>'};a.prototype.inti=function(){this.$model=this.model();if(this.$el.length){this.$el.off("click").on("click",b.proxy(this.show,this))}this.$model.find(".btn-close").on("click",b.proxy(this.hide,this));var c=this;if(this.options.bgClose){c.$model.on("click",function(d){if(d.target===c.$model[0]){c.hide()}})}};a.prototype.model=function(){if(this.$model){return this.$model}else{if(this.options.target){return b(this.options.target)}else{return b(this.STATICS.template).find(".box-content").append(this.options.content).parents(".md-box").appendTo("body")}}};a.prototype.show=function(){if(typeof this.options.onShow==="function"){this.options.onShow()}this.$model.addClass("open")};a.prototype.hide=function(){if(typeof this.options.onClose==="function"){this.options.onClose()}this.$model.removeClass("open")};a.prototype.destroy=function(){if(typeof this.options.onDestroy==="function"){this.options.onDestroy()}this.$model.remove()};b.fn.mdModel=function(c){return this.each(function(){new a(c,this)})};b.fn.mdModel.show=function(c){return new a(c).show()};b.fn.mdModel.destroyAll=function(){b(".mdModel").remove()};b("[data-toggle='box']").each(function(){var c=b(this).attr("href")||b(this).data("target");new a({target:c},this)});b.fn.mdModel.Constructor=a;return a})(jQuery)});