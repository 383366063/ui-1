define(["jquery"],function(b,c,a){var d=b("jquery");return(function(f){var e=function(h,g){this.$el=f(h);this.options=f.extend({},e.DEFAULTS,g);this.inti()};e.DEFAULTS={template:'<div class="popover popover-auto" data-open="false"><div class="arrow"></div></div>',related:"body",relatedSpace:10,onlyOne:false,placement:"bottom",content:null,$popover:null};e.prototype.inti=function(){this.popover().data("open",false);this.isOpen=false;this.isManual=this.options.content?false:true;this.$el.on("click",f.proxy(this.toggle,this))};e.prototype.popover=function(){return this.$popover=this.$popover||f(this.options.template).append(this.options.content)};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.popover().find(".arrow")};e.prototype.getPosition=function(){var g={};g.left=this.$el.offset().left-f(this.options.related).offset().left;g.top=this.$el.offset().top-f(this.options.related).offset().top;if(this.options.placement==="bottom"){this.popover().addClass("popover-bottom");g.left+=(this.$el.innerWidth()-this.popover().innerWidth())/2;g.top+=this.$el.innerHeight()}else{if(this.options.placement==="right"){this.popover().addClass("popover-right");g.left+=this.$el.innerWidth();g.top+=+(this.$el.innerHeight()-this.popover().innerHeight())/2}else{if(this.options.placement==="top"){this.popover().addClass("popover-top");g.left+=(this.$el.innerWidth()-this.popover().innerWidth())/2;g.top-=this.popover().innerHeight()}else{if(this.options.placement==="left"){this.popover().addClass("popover-left");g.left-=this.$el.innerWidth();g.top+=+(this.$el.innerHeight()-this.popover().innerHeight())/2}}}}return g};e.prototype.setPosition=function(){var g=this.getPosition();var i=g.left;var h=g.top;i=i>=this.options.relatedSpace?i:this.options.relatedSpace;h=h>=this.options.relatedSpace?h:this.options.relatedSpace;if(i<=this.options.relatedSpace){i=this.options.relatedSpace;this.arrow().css("left",this.$el.offset().left+this.$el.innerWidth()/2)}if(h<=this.options.relatedSpace){h=this.options.relatedSpace;this.arrow().css("top",this.$el.offset().top+this.$el.innerHeight()/2)}this.popover().css({left:i,top:h})};e.prototype.close=function(){if(!this.isOpen){return}else{if(this.isManual){this.$popover.hide()}else{this.$popover.remove()}this.isOpen=false;this.$popover.data("open",false)}};e.prototype.open=function(){if(this.isManual){this.$popover.show()}else{this.popover().appendTo(this.options.related);this.setPosition()}if(this.options.onlyOne){this.hideOther()}this.isOpen=true;this.popover().data("open",true)};e.prototype.toggle=function(){this.isOpen=this.$popover.data("open")===true;if(this.isOpen){this.close()}else{this.open()}};e.prototype.hideOther=function(){if(this.options.isManual){f(".popover-manual").not(this.$popover).data("open",false).hide();f(".popover-auto").data("close",true).remove()}else{f(".popover-manual").data("open",false).hide();f(".popover-auto").not(this.$popover).remove()}};f.fn.mdPopover=function(g){return this.each(function(){new e(this,g)})};f.fn.mdPopover.Constructor=e})(jQuery)});