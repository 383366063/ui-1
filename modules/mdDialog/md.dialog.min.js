(function(){define(["jquery","../draggable/md.draggable.js"],function(e,d,f){var c,a,b;b=e("jquery");c=e("../draggable/md.draggable.js");return a=(function(){function g(h,i){this.element=h;this.opts=i;this.$el=$(this.element);this.options=$.extend({},g.DEFAULTS,this.opts);this.inti()}g.DEFAULTS={onConfirm:null,onShow:null,onHide:null,title:"",content:null,width:400,$dialog:null,draggable:true,footer:null,height:"auto"};g.STATICS={template:'<div class="md-dialog overlay"><div class="dialog"><div class="dialog-header"><span class="btn-link btn-close" type="button">×</span></div><div class="dialog-body"></div><div class="dialog-footer"><button class="btn btn-cancel">取消</button><button class="btn btn-primary btn-ok">确定</button></div></div></div>'};g.prototype.inti=function(){this.dialog().show().remove();this.$header=this.$dialog.find(".dialog-header");this.$body=this.$dialog.find(".dialog-body");this.$footer=this.$dialog.find(".dialog-footer");if(this.options.title!==null){this.$header.append(this.options.title)}if(this.options.content!==null){this.$body.empty().append(this.options.content)}if(this.options.footer!==null){this.$footer.append(this.options.footer)}return this.$el.on("click",$.proxy(this.show,this))};g.prototype.setPosition=function(){var i,h;i=($(window).innerWidth()-this.$dialog.find(".dialog").innerWidth())/2;h=($(window).innerHeight()-this.$dialog.find(".dialog").innerHeight())/2;return this.$dialog.find(".dialog").css({left:i,top:h})};g.prototype.dialog=function(){return this.$dialog=this.$dialog||this.options.$dialog||$(g.STATICS.template)};g.prototype.show=function(i){var h;h=$.extend({},g.DEFAULTS,this.options,i);if(typeof this.options.onShow==="function"){h.onShow()}this.dialog().show().appendTo("body");this.$dialog.on("click",".btn-cancel,.btn-close",$.proxy(this.hide,this));this.$dialog.on("click",".btn-ok",$.proxy(this.ok,this));if(this.options.draggable){this.dialog().addClass("draggable");this.$header.draggable(this.$dialog.find(".dialog")[0])}return this.setPosition()};g.prototype.hide=function(){if(typeof this.options.onHide==="function"){this.options.onHide()}return this.$dialog.remove()};g.prototype.ok=function(){if(typeof this.options.onConfirm==="function"){return this.options.onConfirm()}};$.fn.mdDialog=function(h){return this.each(function(){return new g(this,h)})};$.fn.mdDialog.Constructor=g;return g})()})}).call(this);