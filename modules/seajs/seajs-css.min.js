function isType(a){return function(b){return{}.toString.call(b)=="[object "+a+"]"}}var isString=isType("String");var doc=document;var head=doc.head||doc.getElementsByTagName("head")[0]||doc.documentElement;var baseElement=head.getElementsByTagName("base")[0];var IS_CSS_RE=/\.css(?:\?|$)/i;var currentlyAddingScript;var interactiveScript;var isOldWebKit=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;function isFunction(a){return{}.toString.call(a)=="[object Function]"}function request(b,f,e){var a=IS_CSS_RE.test(b);var d=doc.createElement(a?"link":"script");if(e){var c=isFunction(e)?e(b):e;if(c){d.charset=c}}addOnload(d,f,a,b);if(a){d.rel="stylesheet";d.href=b}else{d.async=true;d.src=b}currentlyAddingScript=d;baseElement?head.insertBefore(d,baseElement):head.appendChild(d);currentlyAddingScript=null}function addOnload(c,f,a,b){var e="onload" in c;if(a&&(isOldWebKit||!e)){setTimeout(function(){pollCss(c,f)},1);return}if(e){c.onload=d;c.onerror=function(){seajs.emit("error",{uri:b,node:c});d()}}else{c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){d()}}}function d(){c.onload=c.onerror=c.onreadystatechange=null;if(!a&&!seajs.data.debug){head.removeChild(c)}c=null;f()}}function pollCss(d,e){var c=d.sheet;var a;if(isOldWebKit){if(c){a=true}}else{if(c){try{if(c.cssRules){a=true}}catch(b){if(b.name==="NS_ERROR_DOM_SECURITY_ERR"){a=true}}}}setTimeout(function(){if(a){e()}else{pollCss(d,e)}},20)}seajs.request=request;var data=seajs.data;var DIRNAME_RE=/[^?#]*\//;var DOT_RE=/\/\.\//g;var DOUBLE_DOT_RE=/\/[^/]+\/\.\.\//;var MULTI_SLASH_RE=/([^:/])\/+\//g;function dirname(a){return a.match(DIRNAME_RE)[0]}function realpath(a){a=a.replace(DOT_RE,"/");a=a.replace(MULTI_SLASH_RE,"$1/");while(a.match(DOUBLE_DOT_RE)){a=a.replace(DOUBLE_DOT_RE,"/")}return a}function normalize(c){var b=c.length-1;var a=c.charAt(b);if(a==="#"){return c.substring(0,b)}return(c.substring(b-2)===".js"||c.indexOf("?")>0||c.substring(b-3)===".css"||a==="/")?c:c+".js"}var PATHS_RE=/^([^/:]+)(\/.+)$/;var VARS_RE=/{([^{]+)}/g;function parseAlias(b){var a=data.alias;return a&&isString(a[b])?a[b]:b}function parsePaths(c){var b=data.paths;var a;if(b&&(a=c.match(PATHS_RE))&&isString(b[a[1]])){c=b[a[1]]+a[2]}return c}function parseVars(b){var a=data.vars;if(a&&b.indexOf("{")>-1){b=b.replace(VARS_RE,function(c,d){return isString(a[d])?a[d]:c})}return b}function parseMap(d){var f=data.map;var b=d;if(f){for(var c=0,a=f.length;c<a;c++){var e=f[c];b=isFunction(e)?(e(d)||d):d.replace(e[0],e[1]);if(b!==d){break}}}return b}var ABSOLUTE_RE=/^\/\/.|:\//;var ROOT_DIR_RE=/^.*?\/\/.*?\//;function addBase(e,c){var b;var d=e.charAt(0);if(ABSOLUTE_RE.test(e)){b=e}else{if(d==="."){b=realpath((c?dirname(c):data.cwd)+e)}else{if(d==="/"){var a=data.cwd.match(ROOT_DIR_RE);b=a?a[0]+e.substring(1):e}else{b=data.base+e}}}if(b.indexOf("//")===0){b=location.protocol+b}return b}function id2Uri(c,a){if(!c){return""}c=parseAlias(c);c=parsePaths(c);c=parseVars(c);c=normalize(c);var b=addBase(c,a);b=parseMap(b);return b}var doc=document;var cwd=(!location.href||location.href.indexOf("about:")===0)?"":dirname(location.href);var scripts=doc.scripts;var loaderScript=doc.getElementById("seajsnode")||scripts[scripts.length-1];var loaderDir=dirname(getScriptAbsoluteSrc(loaderScript)||cwd);function getScriptAbsoluteSrc(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}seajs.resolve=id2Uri;